<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- http://www.emuita.it/forums/index.php?s=08254b567aaf3c52f285178bf13d87ef&act=ST&f=41&t=50509&st=30 -->
<HTML><HEAD><TITLE>Grandia 2 compression by Gemini</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252"><STYLE type=text/css>FORM {
	DISPLAY: inline
}
TABLE {
	FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: verdana, arial, helvetica
}
TR {
	FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: verdana, arial, helvetica
}
TD {
	FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: verdana, arial, helvetica
}
A:link {
	COLOR: #000080; TEXT-DECORATION: underline
}
A:visited {
	COLOR: #000080; TEXT-DECORATION: underline
}
A:active {
	COLOR: #000080; TEXT-DECORATION: underline
}
A:hover {
	COLOR: #ff0000
}
.hlight {
	BACKGROUND-COLOR: #dfe6ef
}
.dlight {
	BACKGROUND-COLOR: #eef2f7
}
.mainbg {
	BACKGROUND-COLOR: #ffffff
}
.mainfoot {
	BACKGROUND-COLOR: #608fb4
}
.forum1 {
	BACKGROUND-COLOR: #cddeed
}
.forum2 {
	BACKGROUND-COLOR: #ebf1f7
}
.post1 {
	BACKGROUND-COLOR: #ebf1f7
}
.post2 {
	BACKGROUND-COLOR: #cddeed
}
.posthead {
	BACKGROUND-COLOR: #608fb4
}
.postbak {
	BACKGROUND-COLOR: #608fb4
}
.title {
	BACKGROUND-COLOR: #c4dcf7
}
.row1 {
	BACKGROUND-COLOR: #cddeed
}
.row2 {
	BACKGROUND-COLOR: #ebf1f7
}
.postsep {
	HEIGHT: 1px; BACKGROUND-COLOR: #9eb5cb
}
.signature {
	FONT-SIZE: 7.5pt; COLOR: #333399
}
.postdetails {
	FONT-SIZE: 7.5pt
}
.postcolor {
	FONT-SIZE: 9pt; LINE-HEIGHT: 160%
}
#postcolor {
	FONT-SIZE: 9pt; LINE-HEIGHT: 160%
}
.membertitle {
	FONT-SIZE: 10px; COLOR: #000000; LINE-HEIGHT: 150%
}
.normalname {
	FONT-WEIGHT: bold; FONT-SIZE: 12px; PADDING-BOTTOM: 2px; COLOR: #000033
}
.normalname A:link {
	PADDING-BOTTOM: 2px; COLOR: #000033; TEXT-DECORATION: underline
}
.normalname A:visited {
	PADDING-BOTTOM: 2px; COLOR: #000033; TEXT-DECORATION: underline
}
.normalname A:active {
	PADDING-BOTTOM: 2px; COLOR: #000033; TEXT-DECORATION: underline
}
.unreg {
	FONT-WEIGHT: bold; FONT-SIZE: 11px; COLOR: #990000
}
.highlight {
	COLOR: #ff0000
}
.highlight A:link {
	COLOR: #ff0000; TEXT-DECORATION: underline
}
.highlight A:visited {
	COLOR: #ff0000; TEXT-DECORATION: underline
}
.highlight A:active {
	COLOR: #ff0000; TEXT-DECORATION: underline
}
.highlight A:hover {
	TEXT-DECORATION: underline
}
.desc {
	FONT-SIZE: 8pt; COLOR: #000000
}
.copyright {
	FONT-SIZE: 7.5pt; LINE-HEIGHT: 12px; FONT-FAMILY: Verdana, Tahoma, Arial
}
.category {
	FONT-WEIGHT: bold; COLOR: #ffffff; LINE-HEIGHT: 150%; BACKGROUND-COLOR: #006699
}
.category A:link {
	COLOR: #4c77b6; TEXT-DECORATION: none
}
#category A:visited {
	COLOR: #4c77b6; TEXT-DECORATION: none
}
#category A:active {
	COLOR: #4c77b6; TEXT-DECORATION: none
}
.postfoot {
	FONT-WEIGHT: bold; COLOR: #3a4f6c; HEIGHT: 24px; BACKGROUND-COLOR: #608fb4
}
.titlefoot {
	FONT-WEIGHT: bold; COLOR: #ffffff; HEIGHT: 24px; BACKGROUND-COLOR: #006699
}
.titlemedium {
	FONT-WEIGHT: bold; FONT-SIZE: 8pt; COLOR: #ffffff; HEIGHT: 20px; BACKGROUND-COLOR: #608fb4
}
.titlemedium A:link {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlefoot A:link {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlemedium A:visited {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlefoot A:visited {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlemedium A:active {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlefoot A:active {
	COLOR: #ffffff; TEXT-DECORATION: underline
}
.titlemedium A:hover {
	COLOR: #000000; TEXT-DECORATION: underline
}
.subtitle A:hover {
	COLOR: #000000; TEXT-DECORATION: underline
}
.titlefoot A:hover {
	COLOR: #000000; TEXT-DECORATION: underline
}
.maintitle {
	FONT-SIZE: 9.5pt; COLOR: #ffffff; HEIGHT: 26px; BACKGROUND-COLOR: #006699
}
.edit {
	FONT-SIZE: 9px
}
.fancyborder {
	BORDER-RIGHT: #999999 1px dashed; BORDER-TOP: #999999 1px dashed; BORDER-LEFT: #999999 1px dashed; BORDER-BOTTOM: #999999 1px dashed
}
.solidborder {
	BORDER-RIGHT: #999999 1px solid; BORDER-TOP: #999999 1px solid; BORDER-LEFT: #999999 1px solid; BORDER-BOTTOM: #999999 1px solid
}
.maintitle A:link {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.maintitle A:visited {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.maintitle A:active {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.maintitle A:hover {
	TEXT-DECORATION: underline
}
.nav {
	FONT-WEIGHT: bold; FONT-SIZE: 9pt; COLOR: #000000
}
.pagetitle {
	FONT-WEIGHT: bold; FONT-SIZE: 18px; COLOR: #4c77b6; LINE-HEIGHT: 120%; LETTER-SPACING: -1px
}
.useroptions {
	FONT-WEIGHT: bold; COLOR: #ffffff; HEIGHT: 25px; BACKGROUND-COLOR: #598cc3
}
.useroptions A:link {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.useroptions A:visited {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.useroptions A:active {
	COLOR: #ffffff; TEXT-DECORATION: none
}
.bottomborder {
	BORDER-BOTTOM: #d2d2d0 1px dashed
}
.linkthru {
	FONT-SIZE: 8pt; COLOR: #000080
}
.linkthru A:link {
	COLOR: #000080; TEXT-DECORATION: underline
}
.linkthru A:active {
	COLOR: #000080; TEXT-DECORATION: underline
}
.linkthru A:visited {
	COLOR: #000080; TEXT-DECORATION: underline
}
.linkthru A:hover {
	COLOR: #ff0000; TEXT-DECORATION: underline
}
#QUOTE {
	BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 2px; BORDER-TOP: black 1px solid; PADDING-LEFT: 2px; FONT-SIZE: 8pt; PADDING-BOTTOM: 2px; BORDER-LEFT: black 1px solid; COLOR: #333333; PADDING-TOP: 2px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Verdana, Arial; BACKGROUND-COLOR: #fafcfe
}
#CODE {
	BORDER-RIGHT: black 1px solid; PADDING-RIGHT: 2px; BORDER-TOP: black 1px solid; PADDING-LEFT: 2px; FONT-SIZE: 8pt; PADDING-BOTTOM: 2px; BORDER-LEFT: black 1px solid; COLOR: #333333; PADDING-TOP: 2px; BORDER-BOTTOM: black 1px solid; FONT-FAMILY: Verdana, Arial; BACKGROUND-COLOR: #fafcfe
}
.codebuttons {
	FONT-SIZE: 9pt; VERTICAL-ALIGN: middle; FONT-FAMILY: verdana, helvetica, sans-serif
}
.forminput {
	FONT-SIZE: 9pt; VERTICAL-ALIGN: middle; FONT-FAMILY: verdana, helvetica, sans-serif
}
.textinput {
	FONT-SIZE: 9pt; VERTICAL-ALIGN: middle; FONT-FAMILY: verdana, helvetica, sans-serif
}
.input {
	FONT-SIZE: 9pt; VERTICAL-ALIGN: middle; FONT-FAMILY: verdana, helvetica, sans-serif
}
</STYLE>

</HEAD>
<BODY vLink=#000000 aLink=#000000 bgColor=#ebf1f7 leftMargin=0 topMargin=10 
marginheight="0" marginwidth="0">
      <TABLE cellSpacing=1 cellPadding=0 width=760 align=center bgColor=#345487 
      border=0>
        <TBODY>
        <TR>
          <TD class=maintitle>
            <TABLE cellSpacing=0 cellPadding=3 width="100%" border=0>
              <TBODY>
              <TR>
                <TD><IMG height=8 alt="" src="nav_m.gif" 
width=8></TD>
                <TD class=maintitle width="100%"><B>Grandia Ii</B>, 
                  hehehehe....</TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD class=mainbg><!--{IBF.POLL}-->
            <TABLE cellSpacing=1 cellPadding=4 width="100%" border=0>
<!-- end Message --><!--Begin Msg Number 491593-->
              <TR>
                <TD class=posthead vAlign=center><A name=entry491593></A><SPAN 
                  class=normalname><A 
                  href="http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=Profile&amp;CODE=03&amp;MID=3611">geminimewtwo</A></SPAN></TD>
                <TD class=posthead vAlign=top>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD class=posthead><IMG alt="" 
                        src="icon12.gif">&nbsp;&nbsp;<SPAN class=postdetails><B>Inviato il:</B> 25-06-2003, 17:56 
                        </SPAN></TD>
                      <TD class=posthead align=right><A 
                        href="http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=Post&amp;CODE=06&amp;f=41&amp;t=50509&amp;p=491593"><IMG 
                        alt="" src="p_quote.gif" 
                    border=0></A></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD class=post1 vAlign=top><SPAN class=postdetails><IMG 
                  height=80 src="av-3611.gif" width=80 
                  border=0><BR><BR>Membro Junior<BR><IMG 
                  src="msenior.gif" border=0><BR><BR>Gruppo: 
                  Socio<BR><IMG src="starm1200.gif"><BR><BR>Messaggi: 
                  1062<BR>Utente Nr.: 3611<BR>Iscritto il: 04-08-2001<BR>Stato: 
                  <FONT color=#ff0000>offline</FONT><BR><BR><BR></SPAN><IMG 
                  height=1 alt="" src="spacer(1).gif" 
                  width=160><BR></TD>
                <TD class=post1 vAlign=top width="100%"><SPAN 
                  class=postcolor><B>Spiegazione</B> (è tanto che non lo faccio 
                  più, spero di ricordarmi)<B>:</B><BR>Le zone di dati compresse 
                  sono divise in blocchi di dimensioni fisse di 8 byte precedute 
                  da un byte di riconoscimento.<BR>La compressione è del tipo 
                  &quot;Questo dato non è compresso, stampalo in output così com'è, 
                  se invece e compresso, recupera il byte salto-lunghezza e 
                  ricicla i dati già decompressi&quot;.<BR>Per riconoscere nei vari 
                  banchi quali dati sono compressi e quali no si usa il 
                  riconoscitore. Questo byte viene scomposto in 8 bit, ad ogni 
                  bit corrisponde un byte non compresso o un byte compresso 
                  salto-lunghezza.<BR>Il funzionamento del byte di 
                  riconoscimento in Grandia II è simile a quello di FF7 (con 
                  qualche variazione).<BR>Faccio un esempio (almeno evito la 
                  barba di spiegare tutto nei minimi dettagli):<BR>Piccola 
                  legenda dei colori:<BR>-Blu: Riconoscitore<BR>-Nero: Dato 
                  <U>NON</U> compresso<BR>-Rosso: Dato compresso<BR><SPAN 
                  style="COLOR: blue">14</SPAN> 2030<SPAN style="COLOR: red">40</SPAN>50<SPAN style="COLOR: red">60</SPAN>708090<BR><SPAN 
                  style="COLOR: green">Nota: I dati sono puramente casuali, 
                  affonterò dopo un caso reale.</SPAN><BR>Procediamo per passi. 
                  Sappiamo che 14 è il byte di riconoscimento (è sempre a capo 
                  della sequenza del banco, quindi non ci si può sbagliare). 
                  Come fare ad identificare quali byte dopo sono compressi e 
                  quali no? Semplice, convertendo 14 in binario, quindi verrà 
                  fuori 00010100. Leggiamo questa sequenza da destra verso 
                  sinistra e assegnamo progressivamento ogni byte a ciò che c'è 
                  nel banco dei dati. Abbiamo 0 e 0, quindi due dati non 
                  compressi, poi subito 1, quindi un byte salto-lunghezza, 0 
                  cioè altro dato non compresso, 1 altro dato compresso, quindi 
                  tre 0 cioè ultimi 3 byte non compressi.<BR>E i riconoscitori 
                  sono fuori, ora tocca ai byte compressi...<BR><BR>Esempio 
                  preso realmente dai dati:<BR><SPAN 
                  style="COLOR: blue">18</SPAN> 656E20<SPAN style="COLOR: red">64A0</SPAN>696D70 (Versione testuale: .en 
                  d.imp)<BR>L'identificazione già l'ho fatta dai colori, quindi 
                  passo direttamente a farvi capire come funzionano i dati 
                  compressi. In questo caso abbiamo prima 64, dopo A0, però è 
                  meglio lasciarli distinti.<BR>Come prima cosa, scomponiamo il 
                  numero in bit, quindi 64 sarà 01100100, separando i primi 6 
                  bit dagli ultimi due, in questo 
                  modo:<BR>011001&lt;-&gt;00<BR>Per ricavare il salto prendiamo 
                  i 6 bit a sinistra e riconvertiamo in decimale sommando 1, 
                  dovrebbe uscire 26. Per la lunghezza del recupero invece basta 
                  trasformare le cifre binarie a destra in decimale e sommare 2, 
                  quindi 0+2=2.<BR>Ora non resta che saltare indietro di 26 byte 
                  nello stream di output decompresso, copiare 2 byte, spostarsi 
                  alla fine del flusso output e incollare quel che è stato 
                  ripescato.<BR>Stesa procedura con A0, 101000&lt;-&gt;00, somma 
                  di 2 sui byte di destra. Quindi in questo caso il salto sarà 
                  di 41 con recupero di 2 byte.<BR>Il massimo del salto 
                  possibile è 64, il massimo recupero è 5.<BR><BR>Fine <!--emo&:)--><IMG style="VERTICAL-ALIGN: middle" alt=smile.gif 
                  src="smile.gif" border=0><!--endemo--> (spero di 
                  non aver scritto cappellate, purtroppo andavo di fretta <!--emo&:D--><IMG style="VERTICAL-ALIGN: middle" 
                  alt=biggrin.gif src="biggrin.gif" border=0><!--endemo--> )<BR><BR><SPAN style="COLOR: red">NOTA 
                  IMPORTANTISSIMA:</SPAN> I dati compressi non iniziano con 
                  l'inizio del file passato da Mentz, stanno un po' più giù, 
                  quindi c'è necessità di saltare qualcosa per trovare il primo 
                  riconoscitore ed iniziare la decompressione effettiva. <!--Signature--><BR><BR>--------------------<BR><SPAN 
                  class=signature><IMG alt="user posted image" 
                  src="gemini_logo.gif" border=0><BR><BR>Chiuso per 
                  ferie dal 27 Giugno ore 23:00 fino al 18 Luglio ore 
                  14:00.<BR>Grazie per l'attesa gentile cliente.<BR>Se le 
                  dovesse servire assistenza nel frattempo, si registri e lasci 
                  un messaggio <A 
                  href="http://geminimewtwo.altervista.org/phpBB2/viewforum.php?f=5&amp;sid=ea234394b3007ba342c586502a2a8d81" 
                  target=_blank>qui</A>.</SPAN><!--E-Signature--></SPAN></TD></TR>
              <TR>
                <TD class=postfoot align=left>&nbsp;</TD>
                <TD class=postfoot noWrap align=left>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD class=postfoot vAlign=center noWrap align=left><A 
                        href="http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=Msg&amp;CODE=04&amp;MID=3611"><IMG 
                        alt="" src="p_pm.gif" border=0></A>&nbsp;<A 
                        href="http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=Mail&amp;CODE=00&amp;MID=3611"><IMG 
                        alt="" src="p_email.gif" 
                        border=0></A>&nbsp;<A 
                        href="http://www.clomax.emuita.it/cross" 
                        target=_blank><IMG alt="" src="p_www.gif" 
                        border=0></A>&nbsp;<A 
                        href="javascript:PopUp('http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=YAHOO&amp;MID=3611','Pager','450','330','0','1','1','1')"><IMG 
                        alt="" src="p_yim.gif" border=0></A>&nbsp;</TD>
                      <TD class=postfoot vAlign=center align=right><SPAN 
                        class=desc><A 
                        href="http://www.emuita.it/forums/index.php?s=75797b0a68d239cc244f1b7c3c462cc3&amp;act=report&amp;f=41&amp;t=50509&amp;p=491593&amp;st=30">Segnala 
                        messaggio ad un moderatore</A></SPAN>&nbsp;</TD>
                      <TD class=postfoot vAlign=center align=right 
                        width="2%"><A href="javascript:scroll(0,0);"><IMG 
                        alt=Top src="p_up.gif" 
                    border=0></A></TD></TR></TBODY></TABLE></TD></TR>
<!-- end Message --></TBODY></TABLE></TD></TR>
</TBODY></TABLE>
</body>

</html>
